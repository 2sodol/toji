# 주소 검색 모달 기능 정리

## 1. 라이브러리

- **jQuery** (v3.6.0) - DOM 조작 및 Ajax 요청
- **VWorld Search API** - 주소 검색 서비스

---

## 2. 사용 API

### VWorld Search API

- **서버 주소**: `https://api.vworld.kr/req/search`
- **API 키**: `F0529714-44EF-31EC-BCD3-9BB544307DDB`
- **요청 방식**: GET (JSONP)

### API 파라미터

```javascript
{
  service: "search",
  request: "search",
  version: "2.0",
  crs: "EPSG:900913",
  size: 10,                    // 페이지당 결과 수
  page: 1,                     // 페이지 번호
  query: "검색어",             // 주소 검색어
  type: "address",             // 주소 검색
  category: "parcel",          // 필지 주소
  format: "json",
  key: "API_KEY"
}
```

---

## 3. 검색 결과 표출

### 표출되는 정보

1. **도로명 주소** - `item.address.road` + 건물명 (`bldnm`)
2. **지번 주소** - `item.address.parcel`
3. **우편번호** - `item.address.zipcode`
4. **좌표 정보** - `item.point.x`, `item.point.y` (EPSG:900913)

### 결과 표시 형식

- 리스트 형태로 최대 10개씩 표시
- 각 항목 클릭 시 해당 주소 선택
- 페이징 처리 (5개씩 그룹화)

---

## 4. 선택 시 처리

### 부모 페이지로 정보 전달

```javascript
window.parent.receiveSelectedAddress({
  id: "주소ID",
  zipcode: "우편번호",
  roadAddress: "도로명 주소",
  parcelAddress: "지번 주소",
  coordinates: {
    x: 경도,
    y: 위도
  }
});
```

### 부모 페이지에서 처리

- `receiveSelectedAddress()` 함수 호출
- 좌표가 있으면 지도 이동 (`view.setCenter([x, y])`)
- 줌 레벨 18로 설정

---

## 5. 주요 함수

- `searchAddress(page)`: 주소 검색 실행
- `handleSearchResults(response, page, query)`: 검색 결과 처리 및 표시
- `selectAddress(item)`: 주소 선택 시 부모 페이지로 전달
- `renderPagination(totalPages, currentPage)`: 페이징 버튼 생성

---

## 6. 전체 흐름

```
1. 검색어 입력
   ↓
2. VWorld Search API 호출 (JSONP)
   ↓
3. 결과 파싱 및 리스트 표시
   - 도로명 주소, 지번 주소, 우편번호 표시
   ↓
4. 주소 선택
   ↓
5. 부모 페이지로 정보 전달
   - window.parent.receiveSelectedAddress()
   ↓
6. 부모 페이지에서 지도 이동 처리
```

